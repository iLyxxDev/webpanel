<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nael Pterodactyl</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f9; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: 50px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; }
    input, select, button { width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: 1px solid #ccc; }
    button { background: #4CAF50; color: white; font-weight: bold; cursor: pointer; }
    button:hover { background: #45a049; }
  </style>
</head>
<body>
  <div class="container" id="loginBox">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <div class="container" id="dashboard" style="display:none;">
    <h2>Dashboard</h2>
    <select id="actionSelect">
      <option value="">-- Pilih Aksi --</option>
      <option value="createUser">Create User</option>
      <option value="createServer">Create Server (Unlimited)</option>
    </select>
    <div id="formArea"></div>
  </div>

  <script>
    const DOMAIN = "https://privnael.zxc.web.id";
    const API_KEY = "PTLA_API_KEY_KAMU"; // isi manual

    function login(){
      const u = document.getElementById('username').value;
      const p = document.getElementById('password').value;
      if(u && p){
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
      } else {
        alert("Isi username & password!");
      }
    }

    document.getElementById('actionSelect').addEventListener('change', e => {
      const val = e.target.value;
      const formArea = document.getElementById('formArea');
      formArea.innerHTML = "";

      if(val === "createUser"){
        formArea.innerHTML = `
          <h3>Create User</h3>
          <input type="text" id="email" placeholder="Email">
          <input type="text" id="first" placeholder="First Name">
          <input type="text" id="last" placeholder="Last Name">
          <input type="text" id="usernameUser" placeholder="Username">
          <input type="password" id="passUser" placeholder="Password">
          <button onclick="createUser()">Create</button>
        `;
      }

      if(val === "createServer"){
        formArea.innerHTML = `
          <h3>Create Server (Unlimited)</h3>
          <input type="text" id="userId" placeholder="User ID">
          <input type="text" id="eggId" placeholder="Egg ID">
          <input type="text" id="nestId" placeholder="Nest ID">
          <input type="text" id="allocationId" placeholder="Allocation ID">
          <input type="text" id="serverName" placeholder="Server Name">
          <button onclick="createServer()">Create</button>
        `;
      }
    });

    async function createUser(){
      const data = {
        email: document.getElementById('email').value,
        username: document.getElementById('usernameUser').value,
        first_name: document.getElementById('first').value,
        last_name: document.getElementById('last').value,
        password: document.getElementById('passUser').value
      };

      const res = await fetch(`${DOMAIN}/api/application/users`, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${API_KEY}`,
          "Content-Type": "application/json",
          "Accept": "application/json"
        },
        body: JSON.stringify(data)
      });

      const json = await res.json();
      alert("User Created: " + JSON.stringify(json));
    }

    async function createServer(){
      const data = {
        name: document.getElementById('serverName').value,
        user: parseInt(document.getElementById('userId').value),
        egg: parseInt(document.getElementById('eggId').value),
        nest: parseInt(document.getElementById('nestId').value),
        allocation: { default: parseInt(document.getElementById('allocationId').value) },
        limits: { memory: 0, swap: 0, disk: 0, io: 500, cpu: 0 },
        docker_image: "ghcr.io/pterodactyl/yolks:nodejs_18",
        environment: {}
      };

      const res = await fetch(`${DOMAIN}/api/application/servers`, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${API_KEY}`,
          "Content-Type": "application/json",
          "Accept": "application/json"
        },
        body: JSON.stringify(data)
      });

      const json = await res.json();
      alert("Server Created: " + JSON.stringify(json));
    }
  </script>
</body>
</html>
